<!-- <ion-header>
    <ion-toolbar color="primary">
        <ion-title>Register</ion-title>
    </ion-toolbar>
</ion-header> -->

<ion-content class="ion-no-padding">
    <div class="main">
        <ion-card class="no-margin">
            <ion-card-content>
                <ion-row class="row">
                    <div class="fire-logo">
                        <img src="assets/custom-ion-icons/logo9.png" class="img-logo">
                        <ion-text>
                            <h2 class="ion-text-center no-margin margin-vertical">Welcome to iCanyons</h2>
                        </ion-text>
                    </div>
                </ion-row>


                <form class="form" [formGroup]="validationsForm" (ngSubmit)="tryRegister(validationsForm.value)">

                    <ion-item>
                        <ion-label position="floating" color="primary">Username</ion-label>
                        <ion-input type="text" formControlName="username"></ion-input>
                    </ion-item>
                    <div class="validation-errors">
                        <ng-container *ngFor="let validation of validationMessages.email">
                            <div class="error-message" *ngIf="validationsForm.get('username').hasError(validation.type) && (validationsForm.get('username').dirty || validationsForm.get('username').touched)">
                                {{ validation.message }}
                            </div>
                        </ng-container>
                    </div>

                    <ion-item>
                        <ion-label position="floating" color="primary">Email</ion-label>
                        <ion-input type="text" formControlName="email"></ion-input>
                    </ion-item>
                    <div class="validation-errors">
                        <ng-container *ngFor="let validation of validationMessages.email">
                            <div class="error-message" *ngIf="validationsForm.get('email').hasError(validation.type) && (validationsForm.get('email').dirty || validationsForm.get('email').touched)">
                                {{ validation.message }}
                            </div>
                        </ng-container>
                    </div>

                    <ion-item>
                        <ion-label position="floating" color="primary">Password</ion-label>
                        <ion-input [type]="passwordType" formControlName="password"></ion-input>
                        <ion-icon slot="end" name="eye" [color]="passwordShown === true ? 'dark' : 'medium'" (click)="passwordToogle()"></ion-icon>
                    </ion-item>
                    <div class="validation-errors">
                        <ng-container *ngFor="let validation of validationMessages.password">
                            <div class="error-message" *ngIf="validationsForm.get('password').hasError(validation.type) && (validationsForm.get('password').dirty || validationsForm.get('password').touched)">
                                {{ validation.message }}
                            </div>
                        </ng-container>
                    </div>

                    <ion-item>
                        <ion-label position="floating" color="primary">Confirm password</ion-label>
                        <ion-input [type]="passwordType" formControlName="confirmPassword"></ion-input>
                        <ion-icon slot="end" name="eye" [color]="passwordShown === true ? 'dark' : 'medium'" (click)="passwordToogle()"></ion-icon>
                    </ion-item>
                    <div class="validation-errors">
                        <ng-container *ngFor="let validation of validationMessages.password">
                            <div class="error-message" *ngIf="validationsForm.get('confirmPassword').hasError(validation.type) && (validationsForm.get('confirmPassword').dirty || validationsForm.get('confirmPassword').touched)">
                                {{ validation.message }}
                            </div>
                            <div class="error-message" *ngIf="!validationsForm.get('confirmPassword').errors && validationsForm.hasError('passwordNotMatch')">
                                Password and Confirm password fields should match
                            </div>

                        </ng-container>
                    </div>

                    <ion-button class="submit-btn" expand="block" type="submit" [disabled]="!validationsForm.valid">Register</ion-button>
                    <label class="error-message">{{ errorMessage }}</label>
                    <label class="success-message">{{ successMessage }}</label>
                </form>
                <p class="go-to-login ion-text-center">Already have an account? <a (click)="goLoginPage()">Try to Log In.</a></p>
            </ion-card-content>
        </ion-card>
    </div>
</ion-content>